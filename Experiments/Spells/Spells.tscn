[gd_scene load_steps=24 format=3 uid="uid://wbdwm2s1b34v"]

[ext_resource type="Script" path="res://Experiments/Spells/Spells.gd" id="1_5bb8a"]
[ext_resource type="AudioStream" uid="uid://mdc7x0h17tfn" path="res://Music/Track_DelendNoIntro112.mp3" id="1_tkckc"]
[ext_resource type="Script" path="res://Experiments/Spells/force_push.gd" id="4_54giv"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/AreaTargetingStrategy.gd" id="5_4uyc0"]
[ext_resource type="PackedScene" uid="uid://22hjgugr4bg3" path="res://Entities/Player/player.tscn" id="5_07648"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/AreaCollisionStrategy.gd" id="6_tknv1"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/HitStrategy.gd" id="7_iasih"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/DamageHitStrategy.gd" id="8_dkwnc"]
[ext_resource type="Script" path="res://Experiments/ProceduralAnimation/ProceduralAnimation.gd" id="8_wlpwo"]
[ext_resource type="PackedScene" uid="uid://damo8c7lkvjjg" path="res://Engine/default_environment.tscn" id="9_6bc5i"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/KnockbackHitStrategy.gd" id="9_l3i07"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/VisualStrategy.gd" id="10_okin0"]
[ext_resource type="Script" path="res://Experiments/Spells/Strategies/GPUParticleVisualStrategy.gd" id="11_lf8fg"]
[ext_resource type="PackedScene" uid="uid://dwdc1ah3hxksg" path="res://Experiments/Spells/spell_gpu_particles.tscn" id="12_w30iv"]

[sub_resource type="Resource" id="Resource_wn8ey"]
script = ExtResource("5_4uyc0")

[sub_resource type="BoxShape3D" id="BoxShape3D_yps5b"]
size = Vector3(2, 2, 2)

[sub_resource type="Resource" id="Resource_tjiwo"]
script = ExtResource("6_tknv1")
shape = SubResource("BoxShape3D_yps5b")
origin = Vector3(0, 0, 0)

[sub_resource type="Resource" id="Resource_mtk0s"]
script = ExtResource("8_dkwnc")
damage = 0.5

[sub_resource type="Resource" id="Resource_wejid"]
script = ExtResource("9_l3i07")
force = 30.0
distance_scaling = true
max_range = 3.0

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_e6nhf"]
direction = Vector3(0, 0, -1)
flatness = 0.906
initial_velocity_min = 10.41
initial_velocity_max = 18.68
gravity = Vector3(0, 0, 0)
scale_min = 0.3
scale_max = 0.6
anim_speed_min = 1.0
anim_speed_max = 1.5
anim_offset_max = 1.0

[sub_resource type="Resource" id="Resource_h8bgy"]
script = ExtResource("11_lf8fg")
process_material = SubResource("ParticleProcessMaterial_e6nhf")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hrr1f"]
albedo_color = Color(0.351209, 0.161803, 0.204465, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gjb5w"]

[node name="Spells" type="Node3D"]

[node name="Song" type="AudioStreamPlayer" parent="."]
process_priority = 5
process_physics_priority = 5
stream = ExtResource("1_tkckc")
volume_db = -25.995

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="Player" parent="SubViewportContainer/SubViewport" instance=ExtResource("5_07648")]

[node name="Spells" type="Node3D" parent="SubViewportContainer/SubViewport/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 0)
script = ExtResource("1_5bb8a")

[node name="Label3D" type="Label3D" parent="SubViewportContainer/SubViewport/Player/Spells"]
transform = Transform3D(0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 0, 2.67236, 0)
text = "yes
"

[node name="ForcePush" type="Node3D" parent="SubViewportContainer/SubViewport/Player/Spells"]
script = ExtResource("4_54giv")
duration = 0.3
targeting_strategy = SubResource("Resource_wn8ey")
collision_strategy = SubResource("Resource_tjiwo")
hit_strategies = Array[ExtResource("7_iasih")]([SubResource("Resource_mtk0s"), SubResource("Resource_wejid")])
visual_strategies = Array[ExtResource("10_okin0")]([SubResource("Resource_h8bgy")])

[node name="SpellGPUParticles" parent="SubViewportContainer/SubViewport/Player/Spells/ForcePush" instance=ExtResource("12_w30iv")]

[node name="CSGBox3D" type="CSGBox3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.360657, -0.4995, 1.03558)
material_override = SubResource("StandardMaterial3D_hrr1f")
use_collision = true
size = Vector3(100, 0.001, 100)
material = SubResource("StandardMaterial3D_gjb5w")

[node name="SmallEnemy" parent="SubViewportContainer/SubViewport" instance_placeholder="res://Entities/SmallEnemy/small_enemy.tscn"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.8784, 0.490967, 8.72515)
damage = 0.0
attack_range = 0

[node name="ProceduralAnimation" type="Node3D" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("target")]
script = ExtResource("8_wlpwo")
frequency = 2.1
damping = 1.5
response = 0.3
target = NodePath("../Player")

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/ProceduralAnimation"]
transform = Transform3D(0.707107, -0.353553, 0.612372, 3.02058e-16, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 6, 6, 6)
projection = 1
current = true
fov = 90.0
size = 10.419

[node name="DefaultEnvironment" parent="SubViewportContainer/SubViewport" instance=ExtResource("9_6bc5i")]
